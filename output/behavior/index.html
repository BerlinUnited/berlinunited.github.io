
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>Behavior - Berlin United - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#behavior" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Berlin United - Documentation" class="md-header__button md-logo" aria-label="Berlin United - Documentation" data-md-component="logo">
      
  <img src="../img/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Berlin United - Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Behavior
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Berlin United - Documentation" class="md-nav__button md-logo" aria-label="Berlin United - Documentation" data-md-component="logo">
      
  <img src="../img/favicon.ico" alt="logo">

    </a>
    Berlin United - Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      <label class="md-nav__link" for="__nav_1">
        Teamreport
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Teamreport" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Teamreport
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../architecture_intro/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../debugging/" class="md-nav__link">
        Debugging and Tools
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../vision/" class="md-nav__link">
        Visual Perception
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../modeling/" class="md-nav__link">
        Modeling
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../motion/" class="md-nav__link">
        Motion Control
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Behavior
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Behavior
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#team-strategy" class="md-nav__link">
    Team Strategy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#role-change" class="md-nav__link">
    Role Change
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#teamball" class="md-nav__link">
    Teamball
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../bibliography/" class="md-nav__link">
        Bibliography
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        NaoTH Tools
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="NaoTH Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          NaoTH Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../naoth_tools/rc/" class="md-nav__link">
        RoboControl
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../naoth_tools/naoscp/" class="md-nav__link">
        NaoSCP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../naoth_tools/xabsleditor/" class="md-nav__link">
        Xabsleditor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../naoth_tools/simspark/" class="md-nav__link">
        Simspark
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../naoth_tools/webots/" class="md-nav__link">
        Webots
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../naoth_tools/gitlab-ci/" class="md-nav__link">
        Gitlab CI
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        RoboCup Tools
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="RoboCup Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          RoboCup Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../robocup_tools/" class="md-nav__link">
        RoboCup Project
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../robocup_tools/game_recording/" class="md-nav__link">
        Game Recording
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Deep Learning Pipeline
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Deep Learning Pipeline" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Deep Learning Pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deep_learning/" class="md-nav__link">
        Deep Learning Pipeline Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deep_learning/cvat/" class="md-nav__link">
        CVAT Labeltool
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Guides
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../guides/coding_guidelines/" class="md-nav__link">
        Coding Guidelines
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../guides/git-hooks/" class="md-nav__link">
        Git-Hooks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../guides/lab-trackingsystem/" class="md-nav__link">
        NaoTH Tracking System
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../guides/logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#team-strategy" class="md-nav__link">
    Team Strategy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#role-change" class="md-nav__link">
    Role Change
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#teamball" class="md-nav__link">
    Teamball
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="behavior">Behavior</h1>
<p>The Extensible Agent Behavior Specification Language | <em>XABSL</em>
cf. [@xabsl_web] is a behavior description language for autonomous
agents based on hierarchical finite state machines. XABSL is originally
developed since 2002 by the <em>German Team</em>
cf. [@2006:IROSLoetzschRislerJuengel]. Since then it turned out to be
very successful and is used by many teams within the RoboCup community.
We use XABSL to model the behavior of single robots and of the whole
team in the Simulation League 3D and also in the SPL.</p>
<p><img alt="image" src="../img/xabsl_editor.png" />
(left) XabslEditor: On the left side, you see the source code of a
behavior option. On the right side the state machine of this option is
visualized as a graph (right). In the main frame the execution path is
shown as a tree; at the bottom, some monitored symbols can be seen, the
developer can decide which symbols should be monitored; On the left
side, there is a list of buffered frames, which is very useful to see
how the decisions changed in the
past.</p>
<p>In order to be platform independent, we develop our tools in Java. In
particular we are working on a Java based development environment for
XABSL, named <em>XabslEditor</em>. This tool consists of a full featured editor
with syntax highlighting, a graph viewer for visualization of behavior
state machines and an integrated compiler.
Figure <a href="#fig:xabsleditor">7.2</a>{reference-type="ref"
reference="fig:xabsleditor"} (left) illustrates the <em>XABSL Editor</em> with
an open behavior file.</p>
<p>Another useful tool we are working on is the visualizer for the XABSL
execution tree, which allows monitoring the decisions made by the robot
at runtime. At the current state, this visualizer is part of our
debugging and monitoring tool <em>RobotControl</em>.
Figure <a href="#fig:xabsleditor">7.2</a>{reference-type="ref"
reference="fig:xabsleditor"} (right) illustrates the execution tree of
the behavior shown within the visualizer.</p>
<h2 id="team-strategy">Team Strategy</h2>
<p>Our team strategy is based on the notion of the <em>active</em> and <em>passive</em>
behavior. Active behavior defines for each robot what is to do if the
robot is at the ball, while passive behavior describes what is to do if
the particular robot is not at the ball. A robot in the active state,
i.e., handling the ball, is also referred to as <em>striker</em>.</p>
<p>Essential part of the passive behavior are the <em>home positions</em>. These
are fixed positions assigned to each player to which the robot
eventually returns if it is in the passive state. This is important in
order to keep players at the strategically important positions. At the
current point the assignment of players to the passive positions is
fixed based on the player number. The start and kickoff positions which
robot assume during the ready phase before the game are chosen in the
way to minimize the overlapping of the paths of the robots and the
distance to be walked.
Figure <a href="#fig:strategic_positions">7.3</a>{reference-type="ref"
reference="fig:strategic_positions"} illustrates the different
formations - start positions (yellow), kickoff positions (blue) and home
positions (red) - as well as the player assignment.</p>
<p>The task of a robot in the active state is to handle the ball, i.e.,
approach it and move it towards the opponent goal. We use a simulation
based approach to chose the best action/kick to perform as described in
the Section <a href="#s:action_selection">5.5</a>{reference-type="ref"
reference="s:action_selection"}. In the ideal case there is exactly one
player in active state (striker) at all times. We use a team
communication protocol to ensure the player with the best chance to get
the possession of the ball is in the active state. The details of the
negotiation are described in the
Section <a href="#s:role_decision">7.2</a>{reference-type="ref"
reference="s:role_decision"}.</p>
<p>The passive and active behaviors are the same for all field players
differing only in individual home positions, while goalie has
specialized behavior. A small improvement for the goalie this year was,
that the goalie tries to block pro-actively a direct goal kick of an
opponent to the center of the goal. Therefore, if the goalie sees the
ball and the ball is between the penalty cross and half line, the goalie
position itself on the crossing between an oval around the goal and
within the penalty area and a straight line from the goal center to the
ball.</p>
<p>Please refer to the code release for further details of the particular
XABSL behaviors for different states (active, passive, goalie) etc.</p>
<p><img alt="image" src="../img/strategic_positions.png" />
Illustration of the different strategic player position: start
positions (yellow), ready positions during opponent kickoff (blue),
during own kickoff (gray) and home positions (red). For players 1 and 2
all positions are the same respectively. Player 3 is the only one with a
different ready position during own kickoff. Solid arrows illustrate the
assignment of ready positions to the players. Dashed arrows illustrate
the transitions from passive kickoff positions to the corresponding
passive positions.</p>
<h2 id="role-change">Role Change</h2>
<p>The task of the role decision mechanism is to determine who is striker
and who's passive. In general there should only be one robot which acts
as striker. This year we loosened the "only one striker" condition in
order to handle wrong perceptions of a ball. So there can be now two
striker for two "different" balls. All others are passive, means
their're taking a predefined position based on their player number and
observing the ball.</p>
<p>The goalie is excluded from the general role decision process in terms
of how he decides to become striker. His decision is based on how close
the ball is to the own goal - independent from other players. In case
the goalie decides to be striker, all the other player become passive -
or, if one sees a different ball than the goalie, he can get "second
striker".</p>
<p>The decision process which role should be used, runs every cognition
cycle and is based on four data points.</p>
<ol>
<li>
<p>the previous decision (wants to be striker and was striker)</p>
</li>
<li>
<p>the state of the robot (active, fallen, penalized, etc.)</p>
</li>
<li>
<p>time to the ball</p>
</li>
<li>
<p>player number</p>
</li>
</ol>
<p>Therefore we communicate every <span class="arithmatex">\(\sim\)</span><code>&lt;!-- --&gt;</code>500ms the SPL
standard message and the following informations:</p>
<ul>
<li>
<p><strong>is penalized</strong>
    states if the robot is penalized and by this is \"'inactive\"'</p>
</li>
<li>
<p><strong>is/was striker</strong>
    describes if the robot decided to be striker and executed the
    striker behavior</p>
</li>
<li>
<p><strong>wants to be striker</strong>
    describes whether or not the robot is able to play, sees and is near
    the ball and therefore wants to be striker</p>
</li>
<li>
<p><strong>time-to-ball</strong>
    an estimation of how fast the robot can approach the ball; for that
    the robot takes into account his walking, turning and standup speed,
    if there's an obstacle between his position and, if the ball is
    moving, whether the ball can be intercepted by the robot.</p>
</li>
</ul>
<p>Every robot calculates the role decision for every team member
(including himself) based on the communicated information. With that we
should get a consistent distribution of roles throughout the team. We
have currently up to four different methods for the role decision
process. In the last year we've implemented a new variation and
successfully used it in this year competitions.
The decision process is executed in two steps:</p>
<ol>
<li>
<p>every robot decides if he wants to be striker and announces it to
    his teammates as "wants to be striker"</p>
<ul>
<li>
<p>the striker decision is based on whether the robot is in an
    "active" state. That means, the robot isn't fallen or
    penalized and sees the ball.</p>
</li>
<li>
<p>moreover there shouldn't be more than two teammates which
    already announced to be striker and are closer to the ball</p>
</li>
</ul>
</li>
<li>
<p>in the next cognition cycle the robot checks all received messages
    of its teammates for the ones who "wants to be striker". The
    player closest to the ball becomes the first striker. The "second
    striker" is the robot which "wants to be striker", but sees a
    different ball than the first striker</p>
<ul>
<li>hereby 'closest' means, the time the robot needs to approach the
    ball (see <em>time-to-ball</em> above)</li>
</ul>
</li>
<li>
<p>only the first &amp; second striker continues to announce "wants to
    be" striker (see point 1.)</p>
</li>
</ol>
<p>To prevent oscillation the last robot, who was striker, gets a time
bonus in terms of "time to ball" and should therefore always be the
closest to the ball in situations where two players are approximately in
same reaching distance to the ball.</p>
<p>In the whole decision process the goalie has a special role -- he never
"wants to be striker". Instead the goalie gets always striker if the
ball is near the own goal an the goalie needs to clear the ball. Then
the goalie becomes striker, means he executes the striker behavior, and
communicates its decision to his teammates. In consequence all teammates
become passive in order to fulfill the requirement that there should be
only one striker, except there is a player which sees a ball on a
different position than the goalie ("second striker").</p>
<p>When we're assuming that all robots have nearly the same information
about each other, every robot should come to the same conclusion of who
should be striker and who should be passive.</p>
<p>The "two striker for two different balls" approach, allowed us to more
often kick the "real" ball, even if the first striker sees a wrong ball.</p>
<p>As last safeguard, if there's only one player left, this player becomes
striker.</p>
<h2 id="teamball">Teamball</h2>
<p>The teamball represents a hypothesis of the real ball, based on the ball observations of each player and consolidated to a single position on the field.</p>
<p>The teamball is then used to adjust the search behavior of passive robots and the goalie. In the past years, when the robot was passive and searched for the ball, the robot turned in one direction (randomly) and moves his head to find the ball. With the teamball the robot changes its behavior. Before the robot starts a new search rotation he turns to the teamball and looks in that direction in order to find the ball. If he doesn't see the ball, he continues to turn in the same turning direction as before, until a full round is completed. Before starting a new round, the robot takes again a look at the teamball and re-starts the described behavior. The ball search continues until the robot found the ball or another game event occurs.</p>
<p>In 2017 we reintroduced the teamball in order to improve our ball search behavior. Therefor each player communicated its ball model and collected the global ball position of its teammates over a certain amount of time. In each cognition cycle the median in x and y position of all collected balls where determined and used as teamball in the above described behavior. If there wasn't an update for some time, the teamball was invalidated and not used anymore.</p>
<p>This year, another calculation method was implemented. The "old" teamball was sometimes far away from the "real" ball, because of one de-localized robot or incorrect ball detection of teammates. The new method uses the canopy clustering algorithm to generate clusters of balls, communicated by teammates, and selects the cluster to which most robots contribute. The algorithm works roughly by collecting all communicated balls (global position on the field) and generating clusters of balls. The clustering uses two parameters in order to determine the "cluster membership" of a ball. The "tight distance"' is used to select all balls which are only part of just one cluster and the "loose distance" is used to mark balls which possibly belongs to one or more clusters. After the cluster generation, the cluster center (mean/average) with the most "`members"' is used as teamball. The teamball gets invalidated, if there wasn't an update for a certain amount of time.</p>
<p>With the new calculation method, the teamball was more often closer to the "real" ball and more robust against single robots providing "false" ball information.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        

<!-- Footer -->
<footer class="md-footer">

  <!-- The base theme links to previous and/or next page, we omit that here. -->

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>

      <!-- Social links -->
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://twitter.com/naoteamhumboldt" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/BerlinUnited" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/user/teamhumboldt" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.febc23d1.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>